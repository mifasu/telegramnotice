

{% if result == 1 %}
    <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body border-0">
        <h3>Спасибо, скоро наш менеджер свяжется с Вами!</p>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>        
    </div>
{% else %}
    <div class="modal-header">
        <h1 class="modal-title fs-4" id="tnModalLabel">Оставить заявку</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
        <form data-request="onTelegramNoticeSendForm" id="form-1" data-request-update="{ 'TelegramNotice::order-modal-form': '#order-modal-form-div' }">
            <input name="tag" type="hidden">
            <input name="nm" class="form-control form-control-lg  my-2" type="text" placeholder="Введите Ваше Имя">
            <input name="ph" minlength="5" class="form-control form-control-lg my-2" type="text" placeholder="Номер телефона" required> 
            <input name="arr[]" type="hidden" value="" id="hidden-input-btn">
            <input name="arr[]" class="form-control form-control-lg  my-2" type="text" placeholder="Название Вашей компании или ИНН">

            <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary btn-lg btn-pill modal-btn" >Задать вопрос</button>
            </div>

            <p class="fs-9 text-center">Оставляя заявку, вы соглашаетесь на обработку <a href="/privacy" target="_blank">Ваших персональных данных</a></p>
        </form>
    </div>

    <script>        
        const orderModal = document.getElementById('tnModal')
        if (orderModal) {
            orderModal.addEventListener('show.bs.modal', event => {
                // Button that triggered the modal
                const button = event.relatedTarget
                // Extract info from data-bs-* attributes
                const recipient = button.getAttribute('data-bs-whatever')
                // If necessary, you could initiate an Ajax request here
                // and then do the updating in a callback.

                // Update the modal's content.
                const modalTitle = orderModal.querySelector('.modal-title')

                // hidden arr[] input (we want to set this) — select by id to avoid ambiguity when multiple arr[] exist
                const modalHiddenArr = orderModal.querySelector('#hidden-input-btn') || document.getElementById('hidden-input-btn')
                const modalBtn = orderModal.querySelector('.modal-btn')

                modalTitle.textContent = `${recipient}`
                if (modalHiddenArr) modalHiddenArr.value = recipient
                modalBtn.textContent = `${recipient}`
                })
        }
    </script>
{% endif %}



